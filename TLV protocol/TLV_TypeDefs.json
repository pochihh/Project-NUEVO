{
  "comment": "TLV Type Definitions - Ground truth for both C++ and Python. Run generate_tlv_types.py to regenerate headers. See TLV_Payloads.md for detailed payload specifications.",
  "types": {
    "SYS_HEARTBEAT":       1,
    "SYS_STATUS":          2,
    "SYS_CMD":             3,
    "SYS_CONFIG":          4,
    "SYS_SET_PID":         5,

    "DC_ENABLE":           256,
    "DC_SET_POSITION":     257,
    "DC_SET_VELOCITY":     258,
    "DC_SET_PWM":          259,
    "DC_STATUS_ALL":       260,

    "STEP_ENABLE":         512,
    "STEP_SET_PARAMS":     513,
    "STEP_MOVE":           514,
    "STEP_HOME":           515,
    "STEP_STATUS_ALL":     516,

    "SERVO_ENABLE":        768,
    "SERVO_SET":           769,
    "SERVO_STATUS_ALL":    770,

    "SENSOR_IMU":          1024,
    "SENSOR_KINEMATICS":   1025,
    "SENSOR_VOLTAGE":      1026,
    "SENSOR_RANGE":        1027,
    "SENSOR_MAG_CAL_CMD":  1028,
    "SENSOR_MAG_CAL_STATUS": 1029,

    "IO_SET_LED":          1280,
    "IO_SET_NEOPIXEL":     1281,
    "IO_STATUS":           1282
  },
  "descriptions": {
    "SYS_HEARTBEAT":      "RPi → Arduino: Liveness signal. Sent by bridge when no other message is pending (200ms interval).",
    "SYS_STATUS":         "Arduino → RPi: Full system health status. 1Hz in IDLE/ESTOP, 10Hz in RUNNING/ERROR.",
    "SYS_CMD":            "RPi → Arduino: State machine commands (START, STOP, RESET, ESTOP).",
    "SYS_CONFIG":         "RPi → Arduino: System configuration (wheel geometry, sensor config). IDLE state only.",
    "SYS_SET_PID":        "RPi → Arduino: Set DC motor PID gains. Accepted in IDLE and RUNNING.",
    "DC_ENABLE":          "RPi → Arduino: Enable/disable a DC motor with mode selection.",
    "DC_SET_POSITION":    "RPi → Arduino: Set absolute target position (encoder ticks). Position mode only.",
    "DC_SET_VELOCITY":    "RPi → Arduino: Set target velocity (ticks/sec). Velocity mode only.",
    "DC_SET_PWM":         "RPi → Arduino: Set direct PWM output (-255 to +255). PWM mode only.",
    "DC_STATUS_ALL":      "Arduino → RPi: Status for all 4 DC motors in one message. 100Hz in RUNNING.",
    "STEP_ENABLE":        "RPi → Arduino: Enable/disable a stepper motor driver.",
    "STEP_SET_PARAMS":    "RPi → Arduino: Set stepper max speed and acceleration.",
    "STEP_MOVE":          "RPi → Arduino: Move stepper to absolute position or by relative steps.",
    "STEP_HOME":          "RPi → Arduino: Run homing sequence toward a limit switch.",
    "STEP_STATUS_ALL":    "Arduino → RPi: Status for all 4 steppers in one message. 100Hz in RUNNING.",
    "SERVO_ENABLE":       "RPi → Arduino: Enable/disable individual servo channels (not the whole PCA9685).",
    "SERVO_SET":          "RPi → Arduino: Set target pulse width for one or multiple servos.",
    "SERVO_STATUS_ALL":   "Arduino → RPi: PCA9685 status and commanded angles for all 16 channels. 50Hz in RUNNING.",
    "SENSOR_IMU":           "Arduino → RPi: Full ICM-20948 data (quaternion from Fusion AHRS, global accel, raw IMU, mag calibration flag). 100Hz in RUNNING.",
    "SENSOR_KINEMATICS":    "Arduino → RPi: Computed robot pose (x, y, theta) and velocity from wheel odometry. 100Hz in RUNNING.",
    "SENSOR_VOLTAGE":       "Arduino → RPi: Battery and rail voltages. 10Hz in RUNNING.",
    "SENSOR_RANGE":         "Arduino → RPi: Distance reading from one range sensor (ultrasonic or lidar). Per-sensor rate.",
    "SENSOR_MAG_CAL_CMD":   "RPi → Arduino: Start/stop magnetometer calibration or apply saved offsets. IDLE state only.",
    "SENSOR_MAG_CAL_STATUS":"Arduino → RPi: Magnetometer calibration progress, sample counts, and final offsets. Sent during calibration.",
    "IO_SET_LED":         "RPi → Arduino: Set LED state (off, on, blink, breathe, PWM).",
    "IO_SET_NEOPIXEL":    "RPi → Arduino: Set NeoPixel color for one pixel or all pixels.",
    "IO_STATUS":          "Arduino → RPi: All UserIO state (buttons, limits, LEDs, NeoPixels). 100Hz in RUNNING."
  }
}
